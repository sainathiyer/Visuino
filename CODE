#define VISUINO_ARDUINO_UNO

#include <OpenWire.h>
#include <Mitov.h>
#include <Mitov_FormattedSerial.h>
#include <Mitov_SineGenerator.h>
#ifndef VISUINO_ESP32
#include <Servo.h>
#endif // VISUINO_ESP32
#include <Mitov_Servo.h>

// Declarations

namespace Declarations
{
Mitov::TypedFrequencyGenerator<float, Mitov::SineAnalogGenerator> SineAnalogGenerator1 = Mitov::TypedFrequencyGenerator<float, Mitov::SineAnalogGenerator>( 0.5f, 0.5f );
Mitov::MitovServo<2, 544, 2400> Servo1;
} // Declarations

// Pin Call Declarations

namespace PinCalls
{
void PinCallerReceive1( void *_Data );
} // PinCalls

// Pin Call Implementations

namespace PinCalls
{
void PinCallerReceive1( void *_Data )
{
  Declarations::Servo1.InputPin_o_Receive( _Data );
}

} // PinCalls

namespace ComponentsHardware
{
void SystemUpdateHardware()
{
}
} // ComponentsHardware

//The setup function is called once at startup of the sketch
void setup()
{
  Declarations::SineAnalogGenerator1.Frequency = 0.5;
  Declarations::SineAnalogGenerator1.OutputPin.SetCallback( PinCalls::PinCallerReceive1 );

  Declarations::SineAnalogGenerator1.SystemStart();
  Declarations::Servo1.SystemStart();
}

// The loop function is called in an endless loop
void loop()
{
  unsigned long A_Current_Microseconds = micros();

  Declarations::SineAnalogGenerator1.SystemLoopBegin( A_Current_Microseconds );
}
